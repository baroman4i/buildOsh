(this.webpackJsonpmain=this.webpackJsonpmain||[]).push([[0],{15:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(10),i=n.n(a),s=(n(15),n(4)),o=n.n(s),u=n(5),l=n(3),b=(n(17),n(18),n(8)),j=n(2),d=n(0);var m=function(e){var t=e.content;return Object(d.jsxs)("div",{className:"content-item",children:[Object(d.jsx)("div",{className:"img-container",children:Object(d.jsx)("img",{width:"80",height:"70",src:t.img,alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})}),Object(d.jsxs)("div",{className:"content-info",children:[Object(d.jsx)("h4",{children:t.text}),Object(d.jsx)("h4",{children:t.panorama||""}),Object(d.jsx)("h4",{children:t.video||""})]})]})};var h=function(e){var t=e.el,n=e.type,c=e.setArray;function r(e){e.preventDefault(),e.stopPropagation()}return e.themes,Object(d.jsx)("div",{className:"img-container",children:Object(d.jsx)("div",{className:"drop-area",onDragStart:function(e){return r(e)},onDragLeave:function(e){return function(e){e.preventDefault(),e.stopPropagation()}(e)},onDragOver:function(e){return r(e)},onDrop:function(e){return function(e,t,n){e.preventDefault(),e.stopPropagation();var r=e.dataTransfer.files[0];if("image/jpeg"===r.type||"image/png"===r.type||"image/avif"===r.type){var a=new FormData;a.append("img",r),"content"!==n?a.append("element",JSON.stringify(t)):(a.append("element",JSON.stringify(t[0])),a.append("parent",JSON.stringify(t[1]))),a.append("type",n),fetch("/image",{method:"POST",body:a}).then((function(e){return e.json()})).then((function(e){return c(e)})).catch((function(e){return console.error(e)}))}else alert("\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 jpeg/jpg/png/avif")}(e,t,n)},draggable:!0,children:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f"})})};var f=function(e){var t=e.content,n=e.index,c=e.setCurrentData,r=e.sub,a=e.currentContent,i=e.setCurrentContent;function s(e,t){e.preventDefault(),e.stopPropagation(),c((function(n){return Object(j.a)(Object(j.a)({},n),{},{content:n.content.map((function(n,c){return c===t?{img:n.img,text:e.target.value}:n}))})}))}return Object(d.jsxs)("div",{className:"content-item",draggable:"true",onDragStart:function(e){return function(e){e.stopPropagation(),"content-item"===e.target.className&&(i(t),console.log(e.target.className))}(e)},onDragLeave:function(e){return function(e){"content-item"===e.target.className&&(e.target.style.boxShadow="2px 1px 2px rgb(230, 227, 227)")}(e)},onDragEnd:function(e){return function(e){e.stopPropagation(),e.preventDefault(),e.target.style.boxShadow="2px 1px 2px rgb(230, 227, 227)"}(e)},onDragOver:function(e){return function(e){e.preventDefault(),e.stopPropagation(),"content-item"===e.target.className&&(e.target.style.boxShadow="0 4px 3px gray")}(e)},onDrop:function(e){return function(e,t,n){e.stopPropagation(),e.preventDefault(),"content-item"===e.target.className&&(console.log(n,a),e.target.style.boxShadow="2px 1px 2px rgb(230, 227, 227)",c((function(e){return Object(j.a)(Object(j.a)({},e),{},{content:e.content.map((function(e){return e===n?(console.log("content === c"),a):e===a?n:e}))})})))}(e,0,t)},children:[Object(d.jsx)("div",{className:"tool",children:Object(d.jsx)("button",{onClick:function(){!0===window.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u0443 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f?")&&c((function(e){return Object(j.a)(Object(j.a)({},e),{},{content:e.content.filter((function(e,t){return t!==n}))})}))},children:"\u274c"})}),t.img?Object(d.jsxs)("div",{className:"img-container",children:[Object(d.jsx)("button",{className:"del-btn",onClick:function(){c((function(e){return Object(j.a)(Object(j.a)({},e),{},{content:e.content.map((function(e){return e===t?Object(j.a)(Object(j.a)({},t),{},{img:null}):e}))})}))},children:"\u274c"}),Object(d.jsx)("img",{width:"80",height:"70",src:t.img||null,alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})]}):Object(d.jsx)(h,{el:[t,r],type:"content"}),Object(d.jsxs)("div",{className:"content-info",children:[Object(d.jsx)("input",{value:t.text||"",onChange:function(e){return s(e,n)},placeholder:"Image"},n),Object(d.jsx)("input",{value:t.panorama||"",placeholder:"Panorama Hash",onChange:function(e){return s(e,n)}},n),Object(d.jsx)("input",{value:t.video||"",placeholder:"Video URL",onChange:function(e){return s(e,n)}},n)]})]})};var p=function(e){var t=e.currentData,n=e.sub,c=e.setCurrentData,a=r.a.useState(null),i=Object(l.a)(a,2),s=i[0],o=i[1];return Object(d.jsx)("div",{className:"content-container",children:t.content.map((function(e,t){return Object(d.jsx)(f,{content:e,index:t,setCurrentData:c,sub:n,currentContent:s,setCurrentContent:o},e.img||e.text||Date.now())}))})};var O=function(e){var t=e.setThemes,n=e.sub,c=e.onDragOver,a=e.onDragLeave,i=e.onDragStart,s=e.onDragEnd,f=e.onDrop,O=e.setArray,g=e.themes,x=r.a.useState(!1),v=Object(l.a)(x,2),y=v[0],N=v[1],C=r.a.useState(!1),w=Object(l.a)(C,2),S=w[0],k=w[1],P=r.a.useState(n),D=Object(l.a)(P,2),T=D[0],A=D[1];function L(){k((function(e){return!e})),A(n)}function E(){!0===window.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u0443 \u043f\u043e\u0434\u0442\u0435\u043c\u0443?")&&(fetch("/delsub",{method:"POST",body:JSON.stringify({sub:n}),headers:{"Content-Type":"application/json"}}),t((function(e){return e.map((function(e){return e.subtopics.includes(n)?Object(j.a)(Object(j.a)({},e),{},{subtopics:e.subtopics.filter((function(e){return e.id!==n.id}))}):e}))})))}return Object(d.jsx)(d.Fragment,{children:S?Object(d.jsxs)("div",{className:"sub-item active",children:[Object(d.jsxs)("div",{className:"toolbar",children:[Object(d.jsx)("button",{onClick:function(){return t((function(e){return e.map((function(e){return e.subtopics.includes(n)?Object(j.a)(Object(j.a)({},e),{},{subtopics:e.subtopics.map((function(e){return e.id===n.id?T:e}))}):e}))})),void k((function(e){return!e}))},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(d.jsx)("button",{onClick:function(){return L()},children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(d.jsx)("button",{onClick:function(){return E()},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]}),Object(d.jsx)("label",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0442\u0435\u043c\u044b"}),Object(d.jsx)("input",{type:"text",onChange:function(e){A((function(t){return Object(j.a)(Object(j.a)({},t),{},{name:e.target.value})}))},value:T.name||""}),Object(d.jsx)("label",{children:"\u0424\u043e\u043d\u043e\u0432\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043f\u043e\u0434\u0442\u0435\u043c\u044b"}),T.img?Object(d.jsxs)("div",{className:"img-container",children:[Object(d.jsx)("button",{className:"del-btn",onClick:function(e){return function(e,c){if(e.preventDefault(),e.stopPropagation(),!0===window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0434\u0435\u043d\u0438\u0435? \u041f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u044d\u0442\u043e\u0433\u043e \u0431\u043b\u043e\u043a\u0430 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u0441\u044f"))try{fetch("/delimage",{method:"POST",body:JSON.stringify({img:c}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then(Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A((function(e){return Object(j.a)(Object(j.a)({},e),{},{img:null})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).catch((function(e){A((function(e){return Object(j.a)(Object(j.a)({},e),{},{img:null})})),t((function(e){return e.map((function(e){return e.subtopics.includes(n)?Object(j.a)(Object(j.a)({},e),{},{subtopics:e.subtopics.map((function(e){return e.id===n.id?T:e}))}):e}))}))}))}catch(r){console.error(r)}}(e,T.img)},children:"\u274c"}),Object(d.jsx)("img",{width:"80",height:"70",src:T.img,alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043f\u043e\u0434\u0442\u0435\u043c\u044b"})]}):Object(d.jsx)(h,{el:n,type:"sub",setArray:O,array:g}),Object(d.jsx)("label",{children:"\u0425\u0435\u0448 \u043a\u0430\u0440\u0442\u044b \u043f\u043e\u0434\u0442\u0435\u043c\u044b"}),Object(d.jsx)("input",{type:"text",value:T.map||"",onChange:function(e){A((function(t){return Object(j.a)(Object(j.a)({},t),{},{map:e.target.value})}))}}),Object(d.jsx)("label",{children:"\u0422\u0435\u043a\u0441\u0442"}),Object(d.jsx)("textarea",{type:"text",value:T.text||"",onChange:function(e){A((function(t){return Object(j.a)(Object(j.a)({},t),{},{text:e.target.value})}))}}),Object(d.jsx)("label",{children:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043f\u043e\u0434\u0442\u0435\u043c\u044b"}),Object(d.jsx)("button",{className:"add-btn",onClick:function(e){return function(e){e.preventDefault(),A((function(e){return Object(j.a)(Object(j.a)({},e),{},{content:[].concat(Object(b.a)(e.content),[{img:null,video:null,panorama:null,text:null}])})}))}(e)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443"}),Object(d.jsx)(p,{currentData:T,setThemes:t,sub:n,setCurrentData:A})]}):Object(d.jsxs)("div",{onDragOver:c,onDragLeave:a,onDragStart:i,onDragEnd:s,onDrop:f,className:y?"sub-item active":"sub-item",draggable:"true",children:[Object(d.jsxs)("div",{className:"toolbar",children:[Object(d.jsx)("button",{onClick:function(){return N((function(e){return!e}))},children:y?"\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c":"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"}),Object(d.jsx)("button",{onClick:function(){return L()},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(d.jsx)("button",{onClick:function(){return E()},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]}),Object(d.jsx)("label",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0442\u0435\u043c\u044b"}),Object(d.jsx)("h3",{children:n.name}),Object(d.jsx)("label",{children:"\u0424\u043e\u043d\u043e\u0432\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043f\u043e\u0434\u0442\u0435\u043c\u044b"}),n.img?Object(d.jsx)("div",{className:"img-container",children:Object(d.jsx)("img",{width:"80",height:"70",src:n.img,alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043f\u043e\u0434\u0442\u0435\u043c\u044b"})}):Object(d.jsx)(h,{el:n,type:"sub",setArray:O,array:g}),Object(d.jsx)("label",{children:"\u0425\u0435\u0448 \u043a\u0430\u0440\u0442\u044b \u043f\u043e\u0434\u0442\u0435\u043c\u044b"}),Object(d.jsx)("p",{children:n.map}),Object(d.jsx)("label",{children:"\u0422\u0435\u043a\u0441\u0442"}),Object(d.jsx)("p",{children:n.text}),Object(d.jsx)("label",{children:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043f\u043e\u0434\u0442\u0435\u043c\u044b"}),Object(d.jsx)("div",{className:"content-container",draggable:"false",children:n.content.map((function(e){return Object(d.jsx)(m,{content:e},e.img||e.text||Date.now())}))})]})})};var g=function(e){var t=e.theme,n=e.themes,c=e.setThemes,a=e.currentBoard,i=e.setCurrentBoard,s=e.currentSub,o=e.setCurrentSub,u=e.setArray,b=(e.saveAllChanges,r.a.useState(t)),m=Object(l.a)(b,2),f=m[0],p=m[1],g=r.a.useState(!1),x=Object(l.a)(g,2),v=x[0],y=x[1],N=r.a.useState(!1),C=Object(l.a)(N,2),w=C[0],S=C[1];function k(e){e.preventDefault(),e.stopPropagation(),("sub-item"===e.currentTarget.className&&void 0===s.subtopics||"theme-item"===e.currentTarget.className&&void 0!==s.subtopics)&&(e.currentTarget.style.boxShadow="0 4px 3px gray")}function P(e){("sub-item"===e.currentTarget.className&&void 0===s.subtopics||"theme-item"===e.currentTarget.className&&void 0!==s.subtopics)&&(e.currentTarget.style.boxShadow="2px 1px 2px rgb(230, 227, 227)")}function D(e,t,n){e.stopPropagation(),"sub-item"!==e.target.className&&"theme-item"!==e.target.className||(i(t),o(n))}function T(e){e.currentTarget.style.boxShadow="2px 1px 2px rgb(230, 227, 227)"}function A(e,t,r){if("sub-item"!==e.currentTarget.className&&"theme-item"!==e.currentTarget.className||(e.currentTarget.style.boxShadow="2px 1px 2px rgb(230, 227, 227)"),e.stopPropagation(),e.preventDefault(),void 0!==s&&void 0===s.subtopics&&"sub-item"===e.currentTarget.className){var i=a.subtopics.indexOf(s);a.subtopics.splice(i,1);var o=t.subtopics.indexOf(r);o<i?t.subtopics.splice(o,0,s):t.subtopics.splice(o+1,0,s),c(n.map((function(e){return e.id===t.id?t:e.id===a.id?a:e})))}else if(void 0!==s.subtopics&&"theme-item"===e.currentTarget.className){var u=a.indexOf(s);a.splice(u,1);var l=t.indexOf(r);l<u?t.splice(l,0,s):t.splice(l+1,0,s),c(n.map((function(e){return e.id===t.id?t:e.id===a.id?a:e})))}}function L(e){!0===window.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u0443 \u0442\u0435\u043c\u0443?")&&(c((function(t){return t.filter((function(t){return t.id!==e.id}))})),fetch("/deltheme",{method:"POST",body:JSON.stringify({id:e.id,array:n.filter((function(t){return t.id!==e.id}))}),headers:{"Content-Type":"application/json"}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})))}return Object(d.jsxs)("div",{onDragLeave:function(e){return P(e)},onDragStart:function(e){return D(e,n,t)},onDragEnd:function(e){return T(e)},draggable:"true",onDragOver:function(e){return k(e)},onDrop:function(e){return void 0===s.subtopics?function(e,t){t.subtopics.push(s);var r=a.subtopics.indexOf(s);a.subtopics.splice(r,1),c(n.map((function(e){return e.id===t.id?t:e.id===a.id?a:e})))}(0,t):A(e,n,t)},className:"theme-item",children:[Object(d.jsx)("div",{className:"toolbar",children:v?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return y(!1),void p(t)},children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(d.jsx)("button",{onClick:function(){return L(t)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),Object(d.jsx)("button",{onClick:function(){return function(e){c((function(n){return n.map((function(n){return n.id===t.id?e:n}))})),y(!1)}(f)},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}):Object(d.jsxs)(d.Fragment,{children:[w?Object(d.jsx)("button",{onClick:function(){return S(!1)},children:"\u0421\u043a\u0440\u044b\u0442\u044c"}):Object(d.jsx)("button",{onClick:function(){return S(!0)},children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"}),Object(d.jsx)("button",{onClick:function(){return y(!0)},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(d.jsx)("button",{onClick:function(){return L(t)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),Object(d.jsx)("button",{onClick:function(){return function(e){e.subtopics.push({id:Date.now(),name:null,backgroundImage:null,img:null,text:null,content:[],map:null}),c((function(t){return t.map((function(t){return t.id===e.id?e:t}))}))}(t)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0434\u0442\u0435\u043c\u0443"})]})}),v?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("label",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u0435\u043c\u044b"}),Object(d.jsx)("input",{type:"text",value:f.name||"",onChange:function(e){p((function(t){return Object(j.a)(Object(j.a)({},t),{},{name:e.target.value})}))}}),Object(d.jsx)("label",{children:"\u0424\u043e\u043d\u043e\u0432\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0442\u0435\u043c\u044b"}),t.backgroundImage?Object(d.jsxs)("div",{className:"img-container",children:[Object(d.jsx)("button",{className:"del-btn",onClick:function(e){return function(e,n){if(!0===window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0434\u0435\u043d\u0438\u0435? \u041f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u044d\u0442\u043e\u0433\u043e \u0431\u043b\u043e\u043a\u0430 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u0441\u044f"))try{fetch("/delimage",{method:"POST",body:JSON.stringify({img:n}),headers:{"Content-Type":"application/json"}}).then((function(){c((function(e){return e.map((function(e){return e.id===t.id?Object(j.a)(Object(j.a)({},t),{},{backgroundImage:null}):e}))}))})).catch((function(e){c((function(e){return e.map((function(e){return e.id===t.id?Object(j.a)(Object(j.a)({},t),{},{backgroundImage:null}):e}))})),console.error(e)}))}catch(r){console.error(r)}}(0,t.backgroundImage)},children:"\u274c"}),Object(d.jsx)("img",{width:"80",height:"70",src:t.backgroundImage,alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0442\u0435\u043c\u044b"})]}):Object(d.jsx)(h,{el:t,type:"theme",setArray:u,array:n})]}):w?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("label",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u0435\u043c\u044b"}),Object(d.jsx)("h2",{children:t.name}),Object(d.jsx)("label",{children:"\u0424\u043e\u043d\u043e\u0432\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0442\u0435\u043c\u044b"}),Object(d.jsx)("div",{className:"img-container",children:Object(d.jsx)("img",{width:"80",height:"70",src:t.backgroundImage,alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0442\u0435\u043c\u044b"})})]}):Object(d.jsx)("h2",{children:t.name}),Object(d.jsxs)("div",{className:"sub-container",children:[" ",0!==t.subtopics.length?t.subtopics.map((function(e,r){return Object(d.jsx)(O,{setThemes:c,sub:e,themeId:t.id,onDragOver:function(e){return k(e)},onDragLeave:function(e){return P(e)},onDragStart:function(n){return D(n,t,e)},onDragEnd:function(e){return T(e)},onDrop:function(n){return A(n,t,e)},setArray:u,themes:n},e.id)})):Object(d.jsx)("span",{children:"\u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043f\u0435\u0440\u0432\u044b\u0439 \u044d\u043b\u0435\u043c\u0435\u043d\u0442"})]})]})};var x=function(e){var t=e.themes,n=r.a.useState(t.reduce((function(e,t){return e+t.subtopics.length}),0)),c=Object(l.a)(n,2),a=c[0],i=(c[1],r.a.useState(t.reduce((function(e,t){return e+t.subtopics.reduce((function(e,t){return e+t.content.length}),0)}),0))),s=Object(l.a)(i,2),o=s[0];return s[1],Object(d.jsxs)("div",{className:"count-contents",children:["\u0412\u0441\u0435\u0433\u043e: ",Object(d.jsxs)("span",{className:"th",children:[t.length," \u0442\u0435\u043c"]})," ",Object(d.jsxs)("span",{className:"sub",children:[a," \u043f\u043e\u0434\u0442\u0435\u043c"]})," ",Object(d.jsxs)("span",{className:"cont",children:[o," \u043a\u0430\u0440\u0442\u043e\u0447\u0435\u043a \u043f\u043e\u0434\u0442\u0435\u043c"]})]})};var v=function(e){var t=e.array,n=e.setArray,c=e.setLogged,a=r.a.useState(t),i=Object(l.a)(a,2),s=i[0],o=i[1],u=r.a.useState([]),j=Object(l.a)(u,2),m=j[0],h=j[1],f=r.a.useState([]),p=Object(l.a)(f,2),O=p[0],v=p[1],y=r.a.useState(!1),N=Object(l.a)(y,2),C=N[0],w=N[1];function S(){var e,n;(e=t,n=s,JSON.stringify(e)===JSON.stringify(n))?window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u044b\u0439\u0442\u0438? \u0412\u0441\u0435 \u043d\u0435\u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043d\u0435 \u0431\u0443\u0434\u0443\u0442 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u044b.")&&c(!1):c(!1)}return Object(d.jsxs)("div",{className:"dashboard-container",onLoad:function(){return w(!1)},children:[Object(d.jsxs)("div",{className:"toolbar",children:[Object(d.jsx)("button",{onClick:function(){return S()},children:"\u0412\u044b\u0439\u0442\u0438"}),Object(d.jsx)("button",{onClick:function(){o((function(e){return[{id:Date.now().toString(),name:null,backgroundImage:null,subtopics:[]}].concat(Object(b.a)(e))}))},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0435\u043c\u0443"}),Object(d.jsx)("button",{onClick:function(){return function(e){var t=JSON.stringify(e);try{fetch("/newarray",{method:"POST",body:t,headers:{"Content-Type":"application/json;charset=utf-8"}}).then((function(e){return e.json()})).then((function(e){return n(e)}))}catch(c){console.error(c)}}(s)},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"}),Object(d.jsx)(x,{themes:s})]}),!C&&Object(d.jsx)("div",{className:"themes-container",children:s.map((function(e){return Object(d.jsx)(g,{theme:e,themes:s,setThemes:o,currentBoard:m,setCurrentBoard:h,currentSub:O,setCurrentSub:v,setArray:o},e.id)}))})]})};var y=function(){return Object(d.jsx)("span",{className:"logo",children:"\u041a\u0443\u043b\u044c\u0442\u0443\u0440\u043d\u043e-\u0438\u0441\u0442\u043e\u0440\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u044b \u041e\u0448\u043c\u044f\u043d\u0441\u043a\u043e\u0433\u043e \u0440\u0430\u0439\u043e\u043d\u0430"})};var N=function(e){var t=e.array,n=e.activeEl,c=e.setActiveEl,r=e.setActivePlace;return Object(d.jsx)("div",{className:"slider",children:Object(d.jsx)("div",{className:"slider-cards",style:{left:"calc(-100% / 3 * ".concat(n-1,")")},children:t.map((function(e,t){return void 0!==e?Object(d.jsxs)("div",{onClick:function(){"function"===typeof r&&r((function(){return 1})),c((function(){return t}))},className:t===n?"slide-card active":"slide-card",children:[e.img?Object(d.jsx)("img",{src:e.img,alt:e.name||"alt"}):null,Object(d.jsx)("h3",{children:e.name||null}),null!==e.text?Object(d.jsx)("h4",{children:void 0!==e.text?e.text.substr(0,e.text.indexOf("."))+"...":null}):null]},t):null}))})})};var C=function(e){var t=e.setActiveTheme,n=e.themes,c=e.activeTheme,r=e.setActivePlace;return Object(d.jsx)("div",{className:"themes",children:Object(d.jsx)(N,{activeEl:c,setActiveEl:t,array:n,setActivePlace:r})})};var w=function(e){var t=e.themes,n=e.activeTheme,c=e.setActiveTheme,r=e.setActivePlace;return Object(d.jsx)("div",{className:"dot-list",children:t.map((function(e,a){return Object(d.jsx)("div",{onClick:function(){c((function(){return a})),r((function(){return Math.floor(t[a].subtopics.length/2)}))},className:a===n?"dot active":"dot"},a)}))})};var S=function(e){var t=e.themes,n=e.activeTheme,c=e.activePlace,r=e.setActivePlace;return Object(d.jsxs)("div",{className:"showplaces-container",children:[Object(d.jsx)("button",{className:"slide-btn",onClick:function(){c>0&&r((function(){return c-1}))},children:"\u2039"}),Object(d.jsx)(N,{activeEl:c,setActiveEl:r,array:t[n].subtopics}),Object(d.jsx)("button",{className:"slide-btn",onClick:function(){t[n].subtopics.length-1>c&&r((function(){return c+1}))},children:"\u203a"})]})};var k=function(e){var t=e.children,n=e.href,c=e.target;return Object(d.jsx)("a",{className:"link-btn",href:n,target:c,children:t})};var P=function(e){var t=e.themes,n=e.activeTheme,c=e.setActiveTheme,r=e.activePlace,a=e.setActivePlace,i=e.setActivePlaceContent;return Object(d.jsxs)("section",{className:"main",id:"main",style:void 0!==t[n].backgroundImage?{backgroundImage:"url(".concat(t[n].backgroundImage,")")}:{backgroundImage:"none"},children:[Object(d.jsx)(y,{}),Object(d.jsx)(C,{setActiveTheme:c,themes:t,activeTheme:n,setActivePlace:a,setActivePlaceContent:i}),Object(d.jsx)(w,{setActiveTheme:c,themes:t,activeTheme:n,setActivePlace:a}),Object(d.jsx)(S,{themes:t,activeTheme:n,activePlace:r,setActivePlace:a,setActivePlaceContent:i}),Object(d.jsx)(k,{href:"#more",children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 "})]})};var D=function(e){var t=e.themes,n=e.activeTheme,c=e.activePlace,a=e.activePlaceContent;console.log(n,c,a);var i=r.a.useMemo((function(){return void 0!==t[n].subtopics[c].content[a]&&t[n].subtopics[c].content[a].video?Object(d.jsx)("iframe",{src:"".concat(t[n].subtopics[c].content[a].video),title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}):void 0!==t[n].subtopics[c].content[a]&&t[n].subtopics[c].content[a].panorama?Object(d.jsx)("iframe",{src:"https://www.google.com/maps/embed?pb=".concat(t[n].subtopics[c].content[a].panorama),title:"panorams",allowfullscreen:"",loading:"lazy"}):Object(d.jsx)("img",{src:void 0!==t[n].subtopics[c].content[a]?t[n].subtopics[c].content[a].img:null,alt:void 0!==t[n].subtopics[c].content[a]?t[n].subtopics[c].content[a].text:null})}),[n,c,a,t]);return Object(d.jsx)("div",{children:i})};var T=function(e){var t=e.themes,n=e.activeTheme,c=e.activePlace,r=e.activePlaceContent,a=e.setActivePlaceContent;return Object(d.jsx)(d.Fragment,{children:void 0!==t[n].subtopics[c]?Object(d.jsxs)("section",{className:"more",id:"more",style:{backgroundImage:"url(".concat(t[n].subtopics[c].img,")")},children:[Object(d.jsxs)("div",{className:"text-content",children:[Object(d.jsx)("h2",{children:t[n].subtopics[c].name}),Object(d.jsx)("p",{children:t[n].subtopics[c].text}),Object(d.jsxs)("div",{className:"links",children:[Object(d.jsx)(k,{href:"https://www.google.com/maps/search/".concat(t[n].subtopics[c].name,",+\u041e\u0448\u044f\u043c\u043d\u0441\u043a\u0438\u0439+\u0440\u0430\u0439\u043e\u043d").replace(/ /gi,"+"),target:"_blank",children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043d\u0430 \u043a\u0430\u0440\u0442\u0435"}),Object(d.jsx)(k,{href:"#main",children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u0442\u0435\u043c\u0430\u043c"})]}),Object(d.jsx)("div",{className:"map",children:Object(d.jsx)("iframe",{title:"map",src:"https://www.google.com/maps/embed?pb="+t[n].subtopics[c].map,allowfullscreen:"",loading:"lazy"})})]}),Object(d.jsxs)("div",{className:"media-content",children:[Object(d.jsx)("h3",{children:"\u0410\u0440\u0445\u0438\u0432\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b"}),Object(d.jsx)("div",{className:"media-input",children:Object(d.jsx)(D,{themes:t,activeTheme:n,activePlace:c,activePlaceContent:r})}),Object(d.jsx)("span",{className:"media-input-text",children:void 0!==t[n].subtopics[c].content[r]?t[n].subtopics[c].content[r].text:null}),Object(d.jsx)(N,{activeEl:r,setActiveEl:a,array:t[n].subtopics[c].content})]})]}):null})};var A=function(e){var t=e.themes,n=e.setActiveTheme,c=e.setActivePlace,a=e.setActivePlaceContent,i=e.setLoad,s=r.a.useState(t),o=Object(l.a)(s,2),u=o[0],b=o[1];return Object(d.jsxs)("div",{className:"hamburger-menu",children:[Object(d.jsx)("input",{id:"menu__toggle",type:"checkbox"}),Object(d.jsx)("label",{className:"menu__btn",htmlFor:"menu__toggle",children:Object(d.jsx)("span",{})}),Object(d.jsxs)("div",{className:"menu__box",children:[Object(d.jsx)("input",{onChange:function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";b(""!==e?t.map((function(t){return!0===(null!==t&&-1!==t.name.toLowerCase().indexOf(e.toLowerCase()))?t:t.subtopics.some((function(t){return-1!==t.name.toLowerCase().indexOf(e.toLowerCase())}))?Object(j.a)(Object(j.a)({},t),{},{subtopics:t.subtopics.filter((function(t){return-1!==t.name.toLowerCase().indexOf(e.toLowerCase())}))}):null})):t)}(e.target.value)},type:"search",className:"menu__search",placeholder:"\u041f\u043e\u0438\u0441\u043a..."}),Object(d.jsx)("div",{className:"box__container",children:Object(d.jsx)("div",{className:"container-items",children:u.map((function(e,r){return null!==e?Object(d.jsxs)("li",{children:[Object(d.jsx)("a",{className:"menu__item",href:"#main",onClick:function(e){return function(e,r){e.stopPropagation();try{c(Math.floor(t[r].subtopics.length/2)),n(r)}finally{i(!1)}}(e,r)},children:e.name}),Object(d.jsx)("ul",{children:e.subtopics.map((function(e,s){return Object(d.jsx)("li",{children:Object(d.jsx)("a",{className:"menu__item",href:"#more",onClick:function(e){return function(e,r,s){e.stopPropagation();try{n(r),c(s),a(Math.floor(t[r].subtopics[s].content.length/2))}finally{i(!1)}}(e,r,s)},children:e.name})},e.id)}))})]},e.id||Date.now()):null}))})})]})]})};var L=function(e){var t=e.setLogged,n=r.a.useState(!1),c=Object(l.a)(n,2),a=c[0],i=c[1];function s(){return(s=Object(u.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),fetch("/login",{method:"POST",body:JSON.stringify({pass:n.target.pass.value}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return!0===e?t(!0):null})).catch((function(e){console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(d.jsxs)(r.a.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){i((function(e){return!e}))},children:Object(d.jsx)("img",{src:a?"img/profile.png":"img/profile2.png",alt:"acount"})}),a?Object(d.jsxs)("form",{action:"",method:"post",enctype:"multip",onSubmit:function(e){return function(e){return s.apply(this,arguments)}(e)},children:[Object(d.jsx)("span",{children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(d.jsx)("input",{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c...",name:"pass"}),Object(d.jsx)("input",{type:"submit",value:"\u0412\u043e\u0439\u0442\u0438"})]}):null]})};var E=function(e){e.isLoading;var t=e.setLoad,n=e.themes,c=e.setLogged,a=r.a.useState(0),i=Object(l.a)(a,2),s=i[0],b=i[1],j=r.a.useState(0),m=Object(l.a)(j,2),h=m[0],f=m[1],p=r.a.useState(0),O=Object(l.a)(p,2),g=O[0],x=O[1];return r.a.useEffect((function(){Object(u.a)(o.a.mark((function e(){var c,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{c=Math.floor(n.length/2),r=Math.floor(n[s].subtopics.length/2),a=void 0!==n[s].subtopics[h]?Math.floor(n[s].subtopics[h].content.length/2):null,b(c),f(r),x(a)}finally{t(!1)}case 1:case"end":return e.stop()}}),e)})))()}),[]),r.a.useEffect((function(){if(0!==n.length)return function(){x((function(){return void 0!==n[s].subtopics[h]?Math.floor(n[s].subtopics[h].content.length/2):null}))}}),[n,s,h]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"toolbar",children:[Object(d.jsx)(A,{themes:n,setActiveTheme:b,setActivePlace:f,setActivePlaceContent:x,setLoad:t}),Object(d.jsx)(L,{setLogged:c})]}),Object(d.jsx)(P,{themes:n,activeTheme:s,setActiveTheme:b,activePlace:h,setActivePlace:f,setActivePlaceContent:x}),Object(d.jsx)(T,{themes:n,activeTheme:s,setActiveTheme:b,activePlace:h,setActivePlace:f,activePlaceContent:g,setActivePlaceContent:x}),Object(d.jsx)("div",{className:"copyright"})]})};var _=function(){var e=r.a.useState([]),t=Object(l.a)(e,2),n=t[0],c=t[1],a=r.a.useState(!0),i=Object(l.a)(a,2),s=i[0],b=i[1],j=r.a.useState(!1),m=Object(l.a)(j,2),h=m[0],f=m[1];return r.a.useEffect((function(){Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:3000/arr").then((function(e){return e.json()})).catch((function(e){console.error(e)}));case 3:if(void 0===(t=e.sent)){e.next=8;break}c(t),e.next=12;break;case 8:return e.next=10,fetch("/arr").then((function(e){return e.json()}));case 10:t=e.sent,c(t);case 12:return e.prev=12,b(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,,12,15]])})))()}),[]),Object(d.jsx)(r.a.Fragment,{children:s?Object(d.jsx)("img",{id:"loader",src:"img/480px-Loader.gif",alt:s.toString()}):h?Object(d.jsx)(v,{array:n,setArray:c,setLogged:f}):Object(d.jsx)("div",{className:"App",onLoad:function(){window.addEventListener("load",(function(){return b(!1)}))},children:Object(d.jsx)(E,{isLoading:s,setLoad:b,themes:n,setLogged:f})})})};i.a.render(Object(d.jsx)(c.StrictMode,{children:Object(d.jsx)(_,{})}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.cc545b1d.chunk.js.map